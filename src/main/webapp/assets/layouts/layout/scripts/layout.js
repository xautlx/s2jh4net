var Layout=function(){var o="layouts/layout/img/";var h="layouts/layout/css/";var g=App.getResponsiveBreakpoint("md");var e=[];var f=[];var c=function(){var v=$(".page-content");var w=$(".page-sidebar");var s=$("body");var r;if(s.hasClass("page-footer-fixed")===true&&s.hasClass("page-sidebar-fixed")===false){var x=App.getViewPort().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight();var q=w.outerHeight();if(q>x){x=q+$(".page-footer").outerHeight()}if(v.height()<x){v.css("min-height",x)}}else{if(s.hasClass("page-sidebar-fixed")){r=j();if(s.hasClass("page-footer-fixed")===false){r=r-$(".page-footer").outerHeight()}}else{var t=$(".page-header").outerHeight();var u=$(".page-footer").outerHeight();if(App.getViewPort().width<g){r=App.getViewPort().height-t-u}else{r=w.height()+20}if((r+t+u)<=App.getViewPort().height){r=App.getViewPort().height-t-u}}v.css("min-height",r)}};var a=function(w,u,t){var s=location.hash.toLowerCase();var v=$(".page-sidebar-menu");if(w==="click"||w==="set"){u=$(u)}else{if(w==="match"){v.find("li > a").each(function(){var x=$(this).attr("ui-sref");if(t&&x){if(t.is(x)){u=$(this);return}}else{var y=$(this).attr("href");if(y){y=y.toLowerCase();if(y.length>1&&s.substr(1,y.length-1)==y.substr(1)){u=$(this);return}}}})}}if(!u||u.size()==0){return}if(u.attr("href")=="javascript:;"||u.attr("ui-sref")=="javascript:;"||u.attr("href")=="#"||u.attr("ui-sref")=="#"){return}var q=parseInt(v.data("slide-speed"));var r=v.data("keep-expanded");if(v.hasClass("page-sidebar-menu-hover-submenu")===false){v.find("li.nav-item.open").each(function(){var x=false;$(this).find("li").each(function(){var y=$(this).attr("ui-sref");if(t&&y){if(t.is(y)){x=true;return}}else{if($(this).find(" > a").attr("href")===u.attr("href")){x=true;return}}});if(x===true){return}$(this).removeClass("open");$(this).find("> a > .arrow.open").removeClass("open");$(this).find("> .sub-menu").slideUp()})}else{v.find("li.open").removeClass("open")}v.find("li.active").removeClass("active");v.find("li > a > .selected").remove();u.parents("li").each(function(){$(this).addClass("active");$(this).find("> a > span.arrow").addClass("open");if($(this).parent("ul.page-sidebar-menu").size()===1){$(this).find("> a").append('<span class="selected"></span>')}if($(this).children("ul.sub-menu").size()===1){$(this).addClass("open")}});if(w==="click"){if(App.getViewPort().width<g&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}}};var p=function(){$(".page-sidebar-mobile-offcanvas .responsive-toggler").click(function(q){$("body").toggleClass("page-sidebar-mobile-offcanvas-open");q.preventDefault();q.stopPropagation()});if($("body").hasClass("page-sidebar-mobile-offcanvas")){$(document).on("click",function(q){if($("body").hasClass("page-sidebar-mobile-offcanvas-open")){if($(q.target).closest(".page-sidebar-mobile-offcanvas .responsive-toggler").length===0&&$(q.target).closest(".page-sidebar-wrapper").length===0){$("body").removeClass("page-sidebar-mobile-offcanvas-open");q.preventDefault();q.stopPropagation()}}})}$(".page-sidebar-menu").on("click","li > a.nav-toggle, li > a > span.nav-toggle",function(x){var w=$(this).closest(".nav-item").children(".nav-link");if(App.getViewPort().width>=g&&!$(".page-sidebar-menu").attr("data-initialized")&&$("body").hasClass("page-sidebar-closed")&&w.parent("li").parent(".page-sidebar-menu").size()===1){return}var r=w.next().hasClass("sub-menu");if(App.getViewPort().width>=g&&w.parents(".page-sidebar-menu-hover-submenu").size()===1){return}if(r===false){if(App.getViewPort().width<g&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}return}var A=w.parent().parent();var y=w;var s=$(".page-sidebar-menu");var q=w.next();var z=s.data("auto-scroll");var u=parseInt(s.data("slide-speed"));var t=s.data("keep-expanded");if(!t){A.children("li.open").children("a").children(".arrow").removeClass("open");A.children("li.open").children(".sub-menu:not(.always-open)").slideUp(u);A.children("li.open").removeClass("open")}var v=-200;if(q.is(":visible")){$(".arrow",y).removeClass("open");y.parent().removeClass("open");q.slideUp(u,function(){if(z===true&&$("body").hasClass("page-sidebar-closed")===false){if($("body").hasClass("page-sidebar-fixed")){s.slimScroll({scrollTo:(y.position()).top})}else{App.scrollTo(y,v)}}c()})}else{if(r){$(".arrow",y).addClass("open");y.parent().addClass("open");q.slideDown(u,function(){if(z===true&&$("body").hasClass("page-sidebar-closed")===false){if($("body").hasClass("page-sidebar-fixed")){s.slimScroll({scrollTo:(y.position()).top})}else{App.scrollTo(y,v)}}c()})}}x.preventDefault()});if(App.isAngularJsApp()){$(".page-sidebar-menu li > a").on("click",function(q){if(App.getViewPort().width<g&&$(this).next().hasClass("sub-menu")===false){$(".page-header .responsive-toggler").click()}})}$(".page-sidebar").on("click"," li > a.ajaxify",function(s){s.preventDefault();App.scrollTop();var q=$(this).attr("href");var r=$(".page-sidebar ul");r.children("li.active").removeClass("active");r.children("arrow.open").removeClass("open");$(this).parents("li").each(function(){$(this).addClass("active");$(this).children("a > span.arrow").addClass("open")});$(this).parents("li").addClass("active");if(App.getViewPort().width<g&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}Layout.loadAjaxContent(q,$(this))});$(".page-content").on("click",".ajaxify",function(r){r.preventDefault();App.scrollTop();var q=$(this).attr("href");if(App.getViewPort().width<g&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}Layout.loadAjaxContent(q)});$(document).on("click",".page-header-fixed-mobile .page-header .responsive-toggler",function(){App.scrollTop()});b();$(".page-sidebar").on("click",".sidebar-search .remove",function(q){q.preventDefault();$(".sidebar-search").removeClass("open")});$(".page-sidebar .sidebar-search").on("keypress","input.form-control",function(q){if(q.which==13){$(".sidebar-search").submit();return false}});$(".sidebar-search .submit").on("click",function(q){q.preventDefault();if($("body").hasClass("page-sidebar-closed")){if($(".sidebar-search").hasClass("open")===false){if($(".page-sidebar-fixed").size()===1){$(".page-sidebar .sidebar-toggler").click()}$(".sidebar-search").addClass("open")}else{$(".sidebar-search").submit()}}else{$(".sidebar-search").submit()}});if($(".sidebar-search").size()!==0){$(".sidebar-search .input-group").on("click",function(q){q.stopPropagation()});$("body").on("click",function(){if($(".sidebar-search").hasClass("open")){$(".sidebar-search").removeClass("open")}})}};var j=function(){var q=App.getViewPort().height-$(".page-header").outerHeight(true);if($("body").hasClass("page-footer-fixed")){q=q-$(".page-footer").outerHeight()}return q};var l=function(){var q=$(".page-sidebar-menu");c();if($(".page-sidebar-fixed").size()===0){App.destroySlimScroll(q);return}if(App.getViewPort().width>=g&&!$("body").hasClass("page-sidebar-menu-not-fixed")){q.attr("data-height",j());App.destroySlimScroll(q);App.initSlimScroll(q);c()}};var b=function(){if($("body").hasClass("page-sidebar-fixed")){$(".page-sidebar").on("mouseenter",function(){if($("body").hasClass("page-sidebar-closed")){$(this).find(".page-sidebar-menu").removeClass("page-sidebar-menu-closed")}}).on("mouseleave",function(){if($("body").hasClass("page-sidebar-closed")){$(this).find(".page-sidebar-menu").addClass("page-sidebar-menu-closed")}})}};var d=function(){$("body").on("click",".sidebar-toggler",function(t){var q=$("body");var s=$(".page-sidebar");var r=$(".page-sidebar-menu");$(".sidebar-search",s).removeClass("open");if(q.hasClass("page-sidebar-closed")){q.removeClass("page-sidebar-closed");r.removeClass("page-sidebar-menu-closed");if(Cookies){Cookies.set("sidebar_closed","0")}}else{q.addClass("page-sidebar-closed");r.addClass("page-sidebar-menu-closed");if(q.hasClass("page-sidebar-fixed")){r.trigger("mouseleave")}if(Cookies){Cookies.set("sidebar_closed","1")}}$(window).trigger("resize")})};var m=function(){$(".page-header").on("click",'.hor-menu a[data-toggle="tab"]',function(r){r.preventDefault();var s=$(".hor-menu .nav");var q=s.find("li.current");$("li.active",q).removeClass("active");$(".selected",q).remove();var t=$(this).parents("li").last();t.addClass("current");t.find("a:first").append('<span class="selected"></span>')});$(".page-header").on("click",".search-form",function(q){$(this).addClass("open");$(this).find(".form-control").focus();$(".page-header .search-form .form-control").on("blur",function(r){$(this).closest(".search-form").removeClass("open");$(this).unbind("blur")})});$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(q){if(q.which==13){$(this).closest(".search-form").submit();return false}});$(".page-header").on("mousedown",".search-form.open .submit",function(q){q.preventDefault();q.stopPropagation();$(this).closest(".search-form").submit()});$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(q){q.stopPropagation()})};var k=function(){$("body").on("shown.bs.tab",'a[data-toggle="tab"]',function(){c()})};var i=function(){var r=300;var q=500;if(navigator.userAgent.match(/iPhone|iPad|iPod/i)){$(window).bind("touchend touchcancel touchleave",function(s){if($(this).scrollTop()>r){$(".scroll-to-top").fadeIn(q)}else{$(".scroll-to-top").fadeOut(q)}})}else{$(window).scroll(function(){if($(this).scrollTop()>r){$(".scroll-to-top").fadeIn(q)}else{$(".scroll-to-top").fadeOut(q)}})}$(".scroll-to-top").click(function(s){s.preventDefault();$("html, body").animate({scrollTop:0},q);return false})};var n=function(){$(".full-height-content").each(function(){var r=$(this);var q;q=App.getViewPort().height-$(".page-header").outerHeight(true)-$(".page-footer").outerHeight(true)-$(".page-title").outerHeight(true)-$(".page-bar").outerHeight(true);if(r.hasClass("portlet")){var s=r.find(".portlet-body");App.destroySlimScroll(s.find(".full-height-content-body"));q=q-r.find(".portlet-title").outerHeight(true)-parseInt(r.find(".portlet-body").css("padding-top"))-parseInt(r.find(".portlet-body").css("padding-bottom"))-5;if(App.getViewPort().width>=g&&r.hasClass("full-height-content-scrollable")){q=q-35;s.find(".full-height-content-body").css("height",q);App.initSlimScroll(s.find(".full-height-content-body"))}else{s.css("min-height",q)}}else{App.destroySlimScroll(r.find(".full-height-content-body"));if(App.getViewPort().width>=g&&r.hasClass("full-height-content-scrollable")){q=q-35;r.find(".full-height-content-body").css("height",q);App.initSlimScroll(r.find(".full-height-content-body"))}else{r.css("min-height",q)}}})};return{initHeader:function(){m()},setSidebarMenuActiveLink:function(r,q){a(r,q,null)},setAngularJsSidebarMenuActiveLink:function(s,r,q){a(s,r,q)},initSidebar:function(q){l();p();d();if(App.isAngularJsApp()){a("match",null,q)}App.addResizeHandler(l)},initContent:function(){n();k();App.addResizeHandler(c);App.addResizeHandler(n)},initFooter:function(){i()},init:function(){this.initHeader();this.initSidebar(null);this.initContent();this.initFooter()},loadAjaxContent:function(r,q){var s=$(".page-content .page-content-body");App.startPageLoading({animate:true});$.ajax({type:"GET",cache:false,url:r,dataType:"html",success:function(u){App.stopPageLoading();s.html(u);for(var t=0;t<e.length;t++){e[t].call(u)}if(q.size()>0&&q.parents("li.open").size()===0){$(".page-sidebar-menu > li.open > a").click()}Layout.fixContentHeight();App.initAjax()},error:function(v,t,w){App.stopPageLoading();s.html("<h4>Could not load the requested content.</h4>");for(var u=0;u<f.length;u++){f[u].call(v)}}})},addAjaxContentSuccessCallback:function(q){e.push(q)},addAjaxContentErrorCallback:function(q){f.push(q)},fixContentHeight:function(){c()},initFixedSidebarHoverEffect:function(){b()},initFixedSidebar:function(){l()},getLayoutImgPath:function(){return App.getAssetsPath()+o},getLayoutCssPath:function(){return App.getAssetsPath()+h}}}();if(App.isAngularJsApp()===false){jQuery(document).ready(function(){Layout.init()})};