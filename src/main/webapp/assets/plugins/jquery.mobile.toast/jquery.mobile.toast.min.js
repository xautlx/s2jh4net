/*
 * jquery-mobile-toast - v0.0.7
 * A jQuery Mobile Android-like Toast Plugin.
 * https://github.com/TobiasHennig/jquery-mobile-toast
 *
 * Copyright (c) 2014 Tobias Hennig
 * Licensed under the MIT license.
 */

!function(a,b){"use strict";a.widget("mobile.toast",{version:"0.0.7",options:{message:"",duration:2e3,position:80,classOnOpen:"",classOnClose:"",beforeposition:null,beforeclose:null,afterclose:null,afteropen:null},_create:function(){this._parseOptions(),this.$p=a.mobile.activePage,this.$c=a(".ui-content",this.$p),this.$toast=this._renderToast(),this._addToPage(),this.reposition(),this.open()},_parseOptions:function(){this.options.duration=this._parseDurationOption(this.options.duration),this.options.position=this._parsePositionOption(this.options.position)},_parseDurationOption:function(a){if("string"==typeof a)switch(a){case"short":a=2500;break;case"long":a=3500;break;default:a=2e3}return a},_parsePositionOption:function(a){if("string"==typeof a)switch(a){case"top":a=20;break;case"center":a=50;break;case"bottom":a=80;break;default:a=80}return a},_renderText:function(){return a("<p>"+this.options.message+"</p>").css({"max-width":"160px",margin:"0",padding:"6px 12px","font-size":"16px",color:"#FFFFFF","text-shadow":"none",border:"none"})},_renderToast:function(){return a("<div data-role='toast'></div>").html(this._renderText()).css({display:"none",position:"fixed","z-index":"1100","background-color":"#34495e","-webkit-border-radius":"6px","border-radius":"6px","background-clip":"padding-box"}).addClass(this.options.classOnOpen)},_addToPage:function(){this.$c.append(this.$toast)},_getToastCoordinates:function(){var a={width:this.$toast.width(),height:this.$toast.height()},b=this._getWindowCoordinates();return{top:b.height*this.options.position/100,left:b.width/2-a.width/2}},_getWindowCoordinates:function(){return{x:a.mobile.window.scrollLeft(),y:a.mobile.window.scrollTop(),width:b.innerWidth||a.mobile.window.width(),height:b.innerHeight||a.mobile.window.height()}},_destroy:function(){this.$toast.remove(),this.$p=null,this.$c=null,this.$toast=null,b.clearTimeout(this.timer),this.timer=null},_setOptions:function(){this._superApply(arguments)},_setOption:function(b,c){("message"!==b||(c=a.trim(c),""!==c))&&("duration"===b&&(c=this._parseDurationOption(c)),"position"===b&&(c=this._parsePositionOption(c)),this._super(b,c))},_beforeEnd:function(){this._trigger("beforeClose"),""!==this.options.classOnClose?this.$toast.addClass(this.options.classOnClose).on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",a.proxy(function(){this._end()},this)):this.$toast.fadeOut(500,a.proxy(this._end,this))},_end:function(){this.destroy(),this._trigger("afterclose")},reposition:function(){this._trigger("beforeposition");var a=this._getToastCoordinates();this.$toast.css({top:a.top,left:a.left})},open:function(){this.$toast.css({display:"inline-block"}),this._trigger("afteropen"),this.timer=b.setTimeout(a.proxy(this._beforeEnd,this),this.options.duration)}})}(jQuery,window,document);